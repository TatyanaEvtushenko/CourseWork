<errorpage *ngIf="!(isReadyCurrentUser && isConfirmedUser)"></errorpage>
<div *ngIf="isReadyCurrentUser && isConfirmedUser">
    <h4>Create a new project</h4>
    <div class="input-field">
        <input id="project-name" #name="ngModel" class="validate" required [(ngModel)]="projectForm.name" type="text" />
        <label for="project-name">Name</label>
    </div>
    <div class="input-field">
        <input id="datepicker" name="datepicker" [(ngModel)]="projectForm.fundRaisingEnd" materialize="pickadate" type="text"
               [materializeParams]="[{format: 'dd/mm/yyyy'}]" />
        <label for="datepicker">Date of the end of fundraising</label>
    </div>
    
    <div class="input-field">
        <input id="project-minpayment" #name="ngModel" class="validate" required 
               [(ngModel)]="projectForm.minPaymentAmount" type="number" />
        <label for="project-minpayment">Minimum possible payment</label>
    </div>

    <div class="input-field">
        <input id="project-maxpayment" #name="ngModel" class="validate" required
               [(ngModel)]="projectForm.maxPaymentAmount" type="number" />
        <label for="project-maxpayment">Maximum possible payment</label>
    </div>

    <tagsearcher (onChanged)="projectForm.tags = $event"></tagsearcher>
    
    <markdowneditor [fieldName]="'Description'" (onChanged)="projectForm.description = $event"></markdowneditor>
    
    <div class="input-field">
        <label for="project-financialPurposes">Financial purposes</label>
        <ul id="project-financialPurposes" class="collection">
            <ng-container *ngFor="let purpose of projectForm.financialPurposes">
                <li class="collection-item">
                    <financialpurpose [financialPurpose]="purpose" [isOwner]="true" [isReached]="false" 
                                      (onDeleted)="deleteFinancialPurpose(purpose)"></financialpurpose>
                </li>
            </ng-container>
        </ul>
    </div>
    <div class="input-field">
        <a href="#financialPurposeModal" class="btn modal-trigger">Add financial purpose</a>
    </div>

    <div class="input-field">
        <button [disabled]="" class="btn" (click)="onSubmit()">Create</button>
    </div>

    <errortext *ngIf="isWrongRequest" [text]="'Mistake, the project has not been created'"></errortext>
    
    <financialpurposemodal (onCreated)="addFinancialPurpose($event)"></financialpurposemodal>
</div>